# TDD-practise

[TOC]

## 介绍

[极客学院](www.jiker.com)上的一个课程，**测试驱动开发实战营**。

**课程目标**

掌握测试驱动开发的方法，练好基本功、改进工作方式，提高开发效率，成为敏捷开发的第一批受益者。

**主体内容**：3 个测试驱动案例，反复实践

- FizzBuzz
- Args
- Mars Rover

## FizzBuzz

**需求**

1. 打印出从1到100的数字；
2. 将其中3的倍数替换成“Fizz”；
3. 5的倍数替换成“Buzz”；
4. 既能被3整除、又能被5整除的数则替换成“FizzBuzz”。

## Args

**初始需求**

我们经常会遇到需要解析命令行参数的场景。如果没有趁手的工具，我们可以自己写一个，自己想办法处理传给main函数的参数。

传入一个程序的参数包含了“标记”（flag）和“值”（value）。标记都是一个字母，前面加上“-”号（例如“-p”这样）。每个标记可以有一个值与之对应，也可以没有对应的值。

我们要开发一个解析器（parser）来处理这些参数。这个解析器需要一个参数结构（schema）来描述“这个程序应该接受哪些参数”的信息，包括：

- 应该有几个标记
- 每个标记应该是什么类型
- 每个标记的缺省值是什么

参数结构指定好以后，就可以把实际接收到的参数列表传给参数解析器。解析器会首先验证参数列表是否与参数结构相匹配。然后，程序就可以向参数解析器查询每个参数的值（根据参数的标记名）。返回值的类型应该与参数结构中规定的类型相一致。

例如，程序接收到的参数是这样：

-l -p 8080 -d /usr/logs

那么对应的参数结构应该规定3个标记：l、p、d

-l（logging，是否记录日志）标记没有与之对应的值，这是一个布尔型的标记，如果传入了“-l”就为True，否则为False。

-p（port，端口号）标记的值是整数型。

-d（directory，目录）标记的值是字符串型。

如果参数结构中规定了的标记在实际的参数列表中没有出现，那么就应该返回合理的缺省值，例如布尔型的缺省值可以是False，数值型的缺省值可以是0，字符串型的缺省值可以是空字符串。

如果实际给出的参数与参数结构不匹配，需要给出良好的错误信息，解释清楚出错的原因。

**扩展需求**

扩展代码，支持列表类型的参数。例如下列参数中：

-g this,is,a,list -d 1,2,-3,5

g标记对应的是字符串类型的列表（[“this”, “is”, “a”, “list”] ），d标记对应的是整数类型的列表（[1, 2, -3, 5] ）。

代码应该具有良好的可扩展性，这样在添加新的值类型时才会简单明了。

## Mars Rover

**需求**

**火星车收到的指令分为四类：**

- 探索区域信息：告知火星车，整片区域的长度（X）和宽度（Y）有多大
- 初始化信息：火星车的降落地点（x, y）和朝向（N, S, E, W）信息
- 移动指令：火星车可以前进（f）或后退（b）
- 转向指令：火星车可以左转90度（l）或右转90度（r）

由于地球和火星之间的距离很远，指令必须批量发送，火星车执行完整批指令之后，再回报自己所在的位置坐标和朝向。

**扩展需求**

下面是火星探索团队提出的其他一些需求：

- 应该阻止小车跑到超出整片区域坐标系的地方去
- 火星不是平的，而是球体，所以如果小车从坐标系的一边跑了出去，应该从另一边跑进来
- 火星地面上有障碍物，如果火星车遇到了障碍物导致后续指令受阻，应该停留在原地，放弃执行后续指令，并立即向地球回报

你需要自己判断，是否采纳这些需求。

